apiVersion: web.azure.upbound.io/v1beta1
kind: PubsubHub
metadata:
  name: example
spec:
  forProvider:
    anonymousConnectionsEnabled: true
    eventHandler:
    - systemEvents:
      - connect
      - connected
      urlTemplate: https://test.com/api/{hub}/{event}
      userEventPattern: '*'
    - auth:
      - managedIdentityId: ${azurerm_user_assigned_identity.test.id}
      systemEvents:
      - connected
      urlTemplate: https://test.com/api/{hub}/{event}
      userEventPattern: event1, event2
    name: tfex-wpsh
    webPubsubId: ${azurerm_web_pubsub.exmaple.id}
  providerConfigRef:
    name: example
